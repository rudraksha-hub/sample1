<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Pet Grooming Booking | Cuddles n Bubbles</title>

  <!-- External links kept unchanged -->
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" />

  <style>
    :root {
      --pet-orange: #FF7F50;
      --pet-orange-light: #FFA07A;
      --pet-orange-dark: #FF6347;
      --pet-sky-blue: #87CEEB;
      --pet-sky-blue-light: #B0E0E6;
      --pet-sky-blue-dark: #4682B4;
      --pet-white: #FFFFFF;
      --pet-cream: #FFFEF7;
      --pet-dark: #2F4F4F;
      --pet-gray-light: #F8F9FA;
      --pet-green: #28a745;
      --pet-red: #dc3545;

      --color-primary: var(--pet-orange);
      --color-secondary: var(--pet-sky-blue);
      --color-surface: var(--pet-white);
      --color-text: var(--pet-dark);
      --color-success: var(--pet-green);
      --color-error: var(--pet-red);

      --gradient-primary: linear-gradient(135deg, var(--pet-orange) 0%, var(--pet-orange-light) 100%);
      --gradient-secondary: linear-gradient(135deg, var(--pet-sky-blue) 0%, var(--pet-sky-blue-light) 100%);

      --shadow-sm: 0 1px 3px rgba(0,0,0,0.1);
      --shadow-md: 0 2px 8px rgba(0,0,0,0.12);
      --shadow-lg: 0 4px 15px rgba(0,0,0,0.15);

      --space-xs: 0.25rem;
      --space-sm: 0.5rem;
      --space-md: 1rem;
      --space-lg: 1.5rem;
      --space-xl: 2rem;

      --radius-sm: 4px;
      --radius-md: 8px;
      --radius-lg: 12px;
      --radius-xl: 16px;
      --radius-full: 9999px;

      --transition: 0.2s ease;
    }

    * { box-sizing: border-box; }
    html { scroll-behavior: smooth; }
    body {
      margin: 0;
      font-family: 'Poppins', sans-serif;
      background: linear-gradient(135deg, var(--pet-cream) 0%, rgba(255, 127, 80, 0.05) 100%);
      color: var(--color-text);
      min-height: 100vh;
      padding: var(--space-md);
      line-height: 1.5;
      font-size: 14px;
    }

    .main-container {
      max-width: 900px;
      margin: var(--space-lg) auto;
      animation: fadeInUp 0.6s ease-out both;
    }

    .booking-container {
      background: var(--color-surface);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-lg);
      overflow: hidden;
      position: relative;
    }

    .booking-container::before {
      content: '';
      position: absolute;
      inset: 0 0 auto 0;
      height: 4px;
      background: var(--gradient-primary);
    }

    /* Header */
    .header {
      text-align: center;
      padding: var(--space-xl);
      background: linear-gradient(135deg, rgba(255, 127, 80, 0.05) 0%, rgba(135, 206, 235, 0.05) 100%);
    }
    .logo {
      display: flex;
      align-items: center;
      justify-content: center;
      margin-bottom: var(--space-md);
      color: var(--color-primary);
      gap: var(--space-xs);
    }
    .logo i { font-size: 2rem; }
    .logo-text {
      font-size: 1.8rem;
      font-weight: 700;
      background: var(--gradient-primary);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }
    .tagline {
      color: var(--color-secondary);
      font-style: italic;
      margin-bottom: var(--space-sm);
      font-weight: 500;
      font-size: 0.95rem;
    }
    .header h2 {
      color: var(--color-text);
      font-size: 1.5rem;
      margin-bottom: var(--space-xs);
      font-weight: 600;
    }
    .header p:last-child { opacity: 0.85; font-size: 0.9rem; }

    /* Sections */
    .services-section { padding: var(--space-lg); background: var(--color-surface); }
    .section-title { text-align: center; margin-bottom: var(--space-lg); }
    .section-title h3 { font-size: 1.3rem; margin-bottom: var(--space-sm); font-weight: 600; }
    .section-title p { opacity: 0.75; font-size: 0.9rem; }

    /* Combo Section */
    .combo-section {
      margin-bottom: var(--space-lg);
      padding: var(--space-lg);
      background: var(--gradient-secondary);
      border-radius: var(--radius-lg);
      position: relative;
    }
    .combo-title {
      text-align: center;
      color: white;
      font-size: 1.2rem;
      font-weight: 600;
      margin-bottom: var(--space-lg);
    }
    .combo-categories {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-lg);
    }
    .combo-category {
      background: var(--color-surface);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      border: 2px solid var(--color-secondary);
      transition: transform var(--transition), box-shadow var(--transition);
      box-shadow: var(--shadow-sm);
    }
    .combo-category:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); }
    .combo-header { text-align: center; margin-bottom: var(--space-md); }
    .combo-pet-image,
    .category-pet-image {
      width: 80px; height: 80px; border-radius: 50%; object-fit: cover;
      margin: 0 auto var(--space-sm);
      border: 3px solid var(--color-secondary);
      box-shadow: var(--shadow-sm);
    }
    .combo-category-title { font-size: 1.1rem; font-weight: 600; margin-bottom: var(--space-xs); }
    .combo-size-note { color: var(--color-secondary); font-weight: 500; font-size: 0.8rem; margin-bottom: var(--space-md); }
    .combo-items { display: grid; gap: var(--space-sm); }

    .combo-item {
      background: linear-gradient(135deg, rgba(135, 206, 235, 0.1) 0%, rgba(135, 206, 235, 0.05) 100%);
      border: 2px solid var(--color-secondary);
      border-radius: var(--radius-md);
      padding: var(--space-md);
      cursor: pointer;
      transition: transform var(--transition), box-shadow var(--transition), background var(--transition), color var(--transition);
      position: relative;
      min-height: 72px;
    }
    .combo-item:hover { transform: scale(1.02); box-shadow: var(--shadow-sm); }
    .combo-item.selected {
      background: var(--color-secondary);
      color: white;
      transform: scale(1.03);
    }
    .combo-item-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: var(--space-sm); }
    .combo-name { font-weight: 600; font-size: 0.95rem; }
    .combo-discount {
      background: var(--gradient-primary);
      color: white;
      padding: var(--space-xs) var(--space-sm);
      border-radius: var(--radius-full);
      font-weight: 600;
      font-size: 0.75rem;
      white-space: nowrap;
    }
    .combo-pricing { display: flex; justify-content: space-between; align-items: center; }
    .combo-price { font-size: 1rem; font-weight: 700; color: var(--pet-sky-blue-dark); }
    .combo-item.selected .combo-price { color: white; }
    .original-price { font-size: 0.8rem; color: #999; text-decoration: line-through; margin-left: var(--space-xs); }
    .combo-checkbox {
      position: absolute; right: var(--space-sm); top: 50%; transform: translateY(-50%);
      width: 22px; height: 22px; border: 2px solid var(--color-secondary); border-radius: 50%;
      background: var(--color-surface); display: flex; align-items: center; justify-content: center;
      transition: opacity var(--transition), background var(--transition), color var(--transition), border-color var(--transition);
      opacity: 0;
    }
    .combo-item:hover .combo-checkbox,
    .combo-item.selected .combo-checkbox { opacity: 1; }
    .combo-item.selected .combo-checkbox { background: white; color: var(--color-secondary); }
    .combo-checkbox i { font-size: 0.8rem; }

    /* Pet Categories */
    .pet-categories {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--space-lg);
      margin-bottom: var(--space-lg);
    }
    .pet-category {
      background: var(--pet-gray-light);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      border: 2px solid transparent;
      transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
      position: relative;
      overflow: hidden;
    }
    .pet-category:hover { transform: translateY(-4px); box-shadow: var(--shadow-md); border-color: var(--color-secondary); }
    .category-header {
      display: flex; flex-direction: column; align-items: center; margin-bottom: var(--space-md);
      padding-bottom: var(--space-md); border-bottom: 2px solid rgba(0,0,0,0.08);
    }
    .category-title { font-size: 1.1rem; font-weight: 600; text-align: center; }

    /* Service Items */
    .service-items { display: grid; gap: var(--space-sm); }
    .service-item {
      display: flex; justify-content: space-between; align-items: center;
      padding: var(--space-sm); background: var(--color-surface); border-radius: var(--radius-sm);
      border: 1px solid transparent; transition: transform var(--transition), box-shadow var(--transition), border-color var(--transition);
      cursor: pointer; position: relative; min-height: 56px;
    }
    .service-item:hover { border-color: var(--color-secondary); transform: translateX(4px); box-shadow: var(--shadow-sm); }
    .service-item.selected { border-color: var(--color-primary); background: rgba(255, 127, 80, 0.08); transform: translateX(4px); }
    .service-name { font-weight: 500; font-size: 0.9rem; }
    .service-price { font-weight: 700; color: var(--color-primary); font-size: 0.95rem; }
    .service-checkbox {
      position: absolute; right: var(--space-sm); top: 50%; transform: translateY(-50%);
      width: 18px; height: 18px; border: 1.5px solid var(--color-primary); border-radius: 50%;
      background: var(--color-surface); display: flex; align-items: center; justify-content: center;
      transition: opacity var(--transition), background var(--transition), color var(--transition);
      opacity: 0;
    }
    .service-item:hover .service-checkbox,
    .service-item.selected .service-checkbox { opacity: 1; }
    .service-item.selected .service-checkbox { background: var(--color-primary); color: var(--color-surface); }
    .service-checkbox i { font-size: 0.7rem; }

    /* Summary */
    .selected-summary {
      background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(40, 167, 69, 0.05) 100%);
      border: 2px solid var(--color-success);
      border-radius: var(--radius-md);
      padding: var(--space-lg);
      margin: var(--space-lg) 0;
      display: none;
    }
    .summary-header { display: flex; align-items: center; margin-bottom: var(--space-md); gap: var(--space-sm); }
    .summary-header i { color: var(--color-success); font-size: 1.2rem; }
    .summary-header h4 { font-size: 1.1rem; font-weight: 600; }

    .summary-items { display: grid; gap: var(--space-xs); }
    .summary-item {
      display: flex; justify-content: space-between; align-items: center;
      padding: var(--space-xs) 0; border-bottom: 1px solid rgba(0,0,0,0.1); font-size: 0.9rem;
    }
    .summary-item:last-child {
      border-bottom: none; font-weight: 700; font-size: 1rem; color: var(--color-primary);
      border-top: 2px solid var(--color-primary); padding-top: var(--space-sm); margin-top: var(--space-sm);
    }
    .total-savings {
      color: var(--color-success); font-size: 0.9rem; font-weight: 600; margin-top: var(--space-sm); text-align: center;
      background: rgba(40, 167, 69, 0.1); padding: var(--space-xs); border-radius: var(--radius-sm);
    }

    /* Sticky mini summary */
    .mini-summary {
      position: sticky; bottom: var(--space-sm);
      display: none; /* toggled via JS */
      background: var(--color-surface);
      border: 1px solid rgba(0,0,0,0.08);
      box-shadow: var(--shadow-md);
      padding: var(--space-sm);
      border-radius: var(--radius-full);
      width: fit-content;
      margin-left: auto;
      z-index: 10;
    }
    .mini-summary span { font-weight: 700; color: var(--color-primary); }

    /* Form */
    .form-section { padding: var(--space-lg); background: var(--pet-gray-light); }
    .form-group { margin-bottom: var(--space-md); }
    label {
      display: flex; align-items: center; margin-bottom: var(--space-xs);
      font-weight: 600; font-size: 0.9rem;
    }
    label i { margin-right: var(--space-xs); color: var(--color-primary); width: 14px; font-size: 0.9rem; }

    input[type="text"],
    input[type="tel"],
    input[type="email"],
    input[type="date"],
    input[type="time"],
    textarea {
      width: 100%; padding: var(--space-sm); font-size: 0.95rem; font-family: 'Poppins', sans-serif;
      border: 1px solid #e1e5e9; border-radius: var(--radius-sm); background-color: var(--color-surface); color: var(--color-text);
      min-height: 40px; transition: border-color var(--transition), box-shadow var(--transition);
    }
    textarea { min-height: 80px; resize: vertical; }
    input:focus, textarea:focus {
      border-color: var(--color-primary); box-shadow: 0 0 0 3px rgba(255, 127, 80, 0.15); outline: none;
    }

    .submit-button {
      width: 100%; background: var(--gradient-primary); color: white; padding: var(--space-md);
      font-size: 1rem; font-weight: 700; font-family: 'Poppins', sans-serif; border: none;
      border-radius: var(--radius-full); cursor: pointer; transition: transform var(--transition), box-shadow var(--transition), opacity var(--transition);
      display: flex; align-items: center; justify-content: center; box-shadow: var(--shadow-sm); gap: var(--space-xs);
    }
    .submit-button:hover { transform: translateY(-2px); box-shadow: var(--shadow-md); }
    .submit-button[disabled] { opacity: 0.6; cursor: not-allowed; }

    .confirmation {
      display: none; text-align: center; padding: var(--space-lg);
      background: linear-gradient(135deg, rgba(40, 167, 69, 0.1) 0%, rgba(40, 167, 69, 0.05) 100%);
      border: 2px solid var(--color-success); border-radius: var(--radius-md); margin: var(--space-md);
    }
    .confirmation i { font-size: 2.5rem; color: var(--color-success); margin-bottom: var(--space-sm); }
    .confirmation h3 { margin-bottom: var(--space-xs); font-size: 1.2rem; }

    .error { border-color: var(--color-error) !important; box-shadow: 0 0 0 3px rgba(220, 53, 69, 0.15) !important; }
    .error-message { color: var(--color-error); font-size: 0.8rem; margin-top: var(--space-xs); display: none; }

    .back-home {
      text-align: center; padding: var(--space-md);
      border-top: 1px solid rgba(0,0,0,0.08); background: var(--pet-gray-light);
    }
    .back-home a {
      color: var(--color-primary); text-decoration: none; font-weight: 600; font-size: 0.95rem;
      display: inline-flex; align-items: center; gap: var(--space-xs);
    }
    .back-home a:hover { text-decoration: underline; }

    @keyframes fadeInUp {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      .main-container { margin: var(--space-sm) auto; }
      .pet-categories, .combo-categories { grid-template-columns: 1fr; gap: var(--space-md); }
      .logo-text { font-size: 1.5rem; }
      .header h2 { font-size: 1.3rem; }
      .combo-pet-image, .category-pet-image { width: 64px; height: 64px; }
    }

    @media (max-width: 480px) {
      body { padding: var(--space-xs); font-size: 13px; }
      .header, .services-section, .form-section, .combo-section { padding: var(--space-md); }
      .pet-category, .combo-category { padding: var(--space-md); }
      .service-item, .combo-item {
        flex-direction: column; text-align: center; gap: var(--space-xs); align-items: center;
        padding-right: calc(var(--space-sm) + 24px);
      }
      .service-checkbox, .combo-checkbox {
        position: static; transform: none; margin-top: var(--space-xs);
      }
      .mini-summary { left: var(--space-sm); right: var(--space-sm); width: auto; border-radius: var(--radius-md); }
    }

    /* Reduced motion support */
    @media (prefers-reduced-motion: reduce) {
      * { animation: none !important; transition: none !important; scroll-behavior: auto !important; }
    }
  </style>
</head>
<body>
  <div class="main-container">
    <div class="booking-container" role="region" aria-label="Grooming booking">
      <!-- Header -->
      <div class="header">
        <div class="logo" aria-label="Cuddles n' Bubbles">
          <i class="fas fa-paw" aria-hidden="true"></i>
          <div class="logo-text">CUDDLES N' BUBBLES</div>
        </div>
        <p class="tagline">Premium Pet Grooming Experience</p>
        <h2>Book Your Pet's Spa Day</h2>
        <p>Choose services for dogs and cats - fill out the form to request an appointment</p>
      </div>

      <!-- Services Selection -->
      <div class="services-section">
        <div class="section-title">
          <h3><i class="fas fa-spa" aria-hidden="true"></i> Select Grooming Services</h3>
          <p>Choose combo offers for maximum savings or individual services</p>
        </div>

        <!-- Combo Deals -->
        <div class="combo-section" aria-label="Special combo deals">
          <h3 class="combo-title">🎉 SPECIAL COMBO DEALS - SAVE BIG! 🎉</h3>
          <div class="combo-categories">
            <!-- Small Dogs Combos -->
            <div class="combo-category">
              <div class="combo-header">
                <img src="https://images.unsplash.com/photo-1583337130417-3346a1be7dee?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Small Dog" class="combo-pet-image" />
                <h4 class="combo-category-title">Small Dogs</h4>
                <p class="combo-size-note">For Chihuahuas, Yorkies, Pugs & similar breeds</p>
              </div>
              <div class="combo-items">
                <div class="combo-item" data-service="hair-bath-combo-small" data-price="1200" data-savings="400" role="button" tabindex="0" aria-pressed="false">
                  <div class="combo-item-header">
                    <div class="combo-name">Hair + Bath Combo</div>
                    <div class="combo-discount">₹400 OFF</div>
                  </div>
                  <div class="combo-pricing">
                    <div class="combo-price">₹1,200 <span class="original-price">₹1,600</span></div>
                  </div>
                  <div class="combo-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
                </div>
                <div class="combo-item" data-service="full-grooming-combo-small" data-price="1600" data-savings="600" role="button" tabindex="0" aria-pressed="false">
                  <div class="combo-item-header">
                    <div class="combo-name">Full Grooming Combo</div>
                    <div class="combo-discount">₹600 OFF</div>
                  </div>
                  <div class="combo-pricing">
                    <div class="combo-price">₹1,600 <span class="original-price">₹2,200</span></div>
                  </div>
                  <div class="combo-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
                </div>
              </div>
            </div>

            <!-- Medium Dogs Combos -->
            <div class="combo-category">
              <div class="combo-header">
                <img src="https://images.unsplash.com/photo-1548199973-03cce0bbc87b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Medium Dog" class="combo-pet-image" />
                <h4 class="combo-category-title">Medium Dogs</h4>
                <p class="combo-size-note">For Labrador, Cocker Spaniel and similar breeds</p>
              </div>
              <div class="combo-items">
                <div class="combo-item" data-service="hair-bath-combo-medium" data-price="1300" data-savings="500" role="button" tabindex="0" aria-pressed="false">
                  <div class="combo-item-header">
                    <div class="combo-name">Hair + Bath Combo</div>
                    <div class="combo-discount">₹500 OFF</div>
                  </div>
                  <div class="combo-pricing">
                    <div class="combo-price">₹1,300 <span class="original-price">₹1,800</span></div>
                  </div>
                  <div class="combo-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
                </div>
                <div class="combo-item" data-service="full-grooming-combo-medium" data-price="1700" data-savings="700" role="button" tabindex="0" aria-pressed="false">
                  <div class="combo-item-header">
                    <div class="combo-name">Full Grooming Combo</div>
                    <div class="combo-discount">₹700 OFF</div>
                  </div>
                  <div class="combo-pricing">
                    <div class="combo-price">₹1,700 <span class="original-price">₹2,400</span></div>
                  </div>
                  <div class="combo-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
                </div>
              </div>
            </div>

            <!-- Large Dogs Combos -->
            <div class="combo-category">
              <div class="combo-header">
                <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Large Dog" class="combo-pet-image" />
                <h4 class="combo-category-title">Large Dogs</h4>
                <p class="combo-size-note">For German Shepherds, Great Danes & similar breeds</p>
              </div>
              <div class="combo-items">
                <div class="combo-item" data-service="hair-bath-combo-large" data-price="1400" data-savings="600" role="button" tabindex="0" aria-pressed="false">
                  <div class="combo-item-header">
                    <div class="combo-name">Hair + Bath Combo</div>
                    <div class="combo-discount">₹600 OFF</div>
                  </div>
                  <div class="combo-pricing">
                    <div class="combo-price">₹1,400 <span class="original-price">₹2,000</span></div>
                  </div>
                  <div class="combo-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
                </div>
                <div class="combo-item" data-service="full-grooming-combo-large" data-price="1800" data-savings="800" role="button" tabindex="0" aria-pressed="false">
                  <div class="combo-item-header">
                    <div class="combo-name">Full Grooming Combo</div>
                    <div class="combo-discount">₹800 OFF</div>
                  </div>
                  <div class="combo-pricing">
                    <div class="combo-price">₹1,800 <span class="original-price">₹2,600</span></div>
                  </div>
                  <div class="combo-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
                </div>
              </div>
            </div>

            <!-- Cat Combo -->
            <div class="combo-category">
              <div class="combo-header">
                <img src="https://images.unsplash.com/photo-1574158622682-e40e69881006?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Cat" class="combo-pet-image" />
                <h4 class="combo-category-title">🐱 Cats</h4>
                <p class="combo-size-note">Complete grooming package for all cats</p>
              </div>
              <div class="combo-items">
                <div class="combo-item" data-service="full-grooming-combo-cat" data-price="1600" data-savings="250" role="button" tabindex="0" aria-pressed="false">
                  <div class="combo-item-header">
                    <div class="combo-name">Full Grooming Package</div>
                    <div class="combo-discount">₹250 OFF</div>
                  </div>
                  <div class="combo-pricing">
                    <div class="combo-price">₹1,600 <span class="original-price">₹1,850</span></div>
                  </div>
                  <div class="combo-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
                </div>
                <div class="combo-item" data-service="hair-bath-combo-cat" data-price="1200" data-savings="400" role="button" tabindex="0" aria-pressed="false">
                  <div class="combo-item-header">
                    <div class="combo-name">Hair + Bath Combo</div>
                    <div class="combo-discount">₹400 OFF</div>
                  </div>
                  <div class="combo-pricing">
                    <div class="combo-price">₹1,200 <span class="original-price">₹1,600</span></div>
                  </div>
                  <div class="combo-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
                </div>
              </div>
            </div>
          </div>

          <!-- Floating mini-summary -->
          <div class="mini-summary" id="miniSummary" aria-live="polite">
            Selected: <span id="miniCount">0</span> • Total: ₹<span id="miniTotal">0</span>
          </div>
        </div>

        <div class="section-title">
          <h3><i class="fas fa-scissors" aria-hidden="true"></i> Individual Services</h3>
          <p>Select individual services based on your pet's needs</p>
        </div>

        <div class="pet-categories" aria-label="Individual services">
          <!-- Small Dogs -->
          <div class="pet-category">
            <div class="category-header">
              <img src="https://images.unsplash.com/photo-1583337130417-3346a1be7dee?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Small Dog" class="category-pet-image" />
              <div class="category-title">Small Dogs</div>
            </div>
            <div class="service-items">
              <div class="service-item" data-service="regular-bath-small" data-price="800" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Regular Bath</div>
                <div class="service-price">₹800</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="medical-bath-small" data-price="1000" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Medical Bath</div>
                <div class="service-price">₹1,000</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="aroma-spa-small" data-price="1100" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Aroma Spa</div>
                <div class="service-price">₹1,100</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="tick-removal-small" data-price="300" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Tick Removal</div>
                <div class="service-price">₹300</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="ear-cleaning-small" data-price="100" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Ear Cleaning</div>
                <div class="service-price">₹100</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="tooth-cleaning-small" data-price="150" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Tooth Cleaning</div>
                <div class="service-price">₹150</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="nail-cut-small" data-price="150" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Nail Cut/Grinding</div>
                <div class="service-price">₹150</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="hygiene-cut-small" data-price="300" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Hygiene Cut</div>
                <div class="service-price">₹300</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
            </div>
          </div>

          <!-- Medium Dogs -->
          <div class="pet-category">
            <div class="category-header">
              <img src="https://images.unsplash.com/photo-1548199973-03cce0bbc87b?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Medium Dog" class="category-pet-image" />
              <div class="category-title">Medium Dogs</div>
            </div>
            <div class="service-items">
              <div class="service-item" data-service="regular-bath-medium" data-price="900" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Regular Bath</div>
                <div class="service-price">₹900</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="medical-bath-medium" data-price="1100" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Medical Bath</div>
                <div class="service-price">₹1,100</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="aroma-spa-medium" data-price="1200" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Aroma Spa</div>
                <div class="service-price">₹1,200</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="tick-removal-medium" data-price="300" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Tick Removal</div>
                <div class="service-price">₹300</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="ear-cleaning-medium" data-price="100" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Ear Cleaning</div>
                <div class="service-price">₹100</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="tooth-cleaning-medium" data-price="150" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Tooth Cleaning</div>
                <div class="service-price">₹150</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="nail-cut-medium" data-price="150" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Nail Cut/Grinding</div>
                <div class="service-price">₹150</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="hygiene-cut-medium" data-price="350" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Hygiene Cut</div>
                <div class="service-price">₹350</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
            </div>
          </div>

          <!-- Large Dogs -->
          <div class="pet-category">
            <div class="category-header">
              <img src="https://images.unsplash.com/photo-1587300003388-59208cc962cb?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Large Dog" class="category-pet-image" />
              <div class="category-title">Large Dogs</div>
            </div>
            <div class="service-items">
              <div class="service-item" data-service="regular-bath-large" data-price="1200" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Regular Bath</div>
                <div class="service-price">₹1,000</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="medical-bath-large" data-price="1300" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Medical Bath</div>
                <div class="service-price">₹1,200</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="aroma-spa-large" data-price="1600" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Aroma Spa</div>
                <div class="service-price">₹1,300</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="tick-removal-large" data-price="400" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Tick Removal</div>
                <div class="service-price">₹400</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="ear-cleaning-large" data-price="50" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Ear Cleaning</div>
                <div class="service-price">₹100</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="tooth-cleaning-large" data-price="200" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Tooth Cleaning</div>
                <div class="service-price">₹150</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="nail-cut-large" data-price="150" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Nail Cut/Grinding</div>
                <div class="service-price">₹150</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="hygiene-cut-large" data-price="300" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Hygiene Cut</div>
                <div class="service-price">₹300</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
            </div>
          </div>

          <!-- Cats -->
          <div class="pet-category">
            <div class="category-header">
              <img src="https://images.unsplash.com/photo-1574158622682-e40e69881006?ixlib=rb-4.0.3&auto=format&fit=crop&w=500&q=80" alt="Cat" class="category-pet-image" />
              <div class="category-title">🐱 Cats</div>
            </div>
            <div class="service-items">
              <div class="service-item" data-service="regular-bath-cat" data-price="800" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Regular Bath</div>
                <div class="service-price">₹800</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="medical-bath-cat" data-price="1000" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Medical Bath</div>
                <div class="service-price">₹1,000</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="aroma-spa-cat" data-price="1100" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Aroma Spa</div>
                <div class="service-price">₹1,100</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="tick-removal-cat" data-price="300" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Tick Removal</div>
                <div class="service-price">₹300</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="ear-cleaning-cat" data-price="100" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Ear Cleaning</div>
                <div class="service-price">₹100</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="tooth-cleaning-cat" data-price="150" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Tooth Cleaning</div>
                <div class="service-price">₹150</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="hair-cut-cat" data-price="500" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Hair Cut</div>
                <div class="service-price">₹800</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
              <div class="service-item" data-service="nail-cut-cat" data-price="300" role="button" tabindex="0" aria-pressed="false">
                <div class="service-name">Nail Cut/Grinding</div>
                <div class="service-price">₹150</div>
                <div class="service-checkbox" aria-hidden="true"><i class="fas fa-check"></i></div>
              </div>
            </div>
          </div>
        </div>

        <!-- Selected Services Summary -->
        <div class="selected-summary" id="selectedSummary" aria-live="polite">
          <div class="summary-header">
            <i class="fas fa-shopping-cart" aria-hidden="true"></i>
            <h4>Selected Services</h4>
          </div>
          <div class="summary-items" id="summaryItems"></div>
          <div class="total-savings" id="totalSavings" style="display: none;">
            🎉 You're saving: ₹<span id="savingsAmount">0</span> with combo offers!
          </div>
        </div>
      </div>

      <!-- Booking Form -->
      <div class="form-section">
        <form id="booking-form" novalidate>
          <div class="form-group">
            <label for="name"><i class="fas fa-user" aria-hidden="true"></i> Your Name:</label>
            <input type="text" id="name" name="name" required placeholder="Enter your full name" autocomplete="name" />
            <div class="error-message" id="name-error" role="alert">Please enter your name</div>
          </div>

          <div class="form-group">
            <label for="phone"><i class="fas fa-phone" aria-hidden="true"></i> Phone Number:</label>
            <input type="tel" id="phone" name="phone" required placeholder="Your phone number" inputmode="tel" autocomplete="tel" />
            <div class="error-message" id="phone-error" role="alert">Please enter a valid phone number</div>
          </div>

          <div class="form-group">
            <label for="email"><i class="fas fa-envelope" aria-hidden="true"></i> Email:</label>
            <input type="email" id="email" name="email" required placeholder="Your email address" autocomplete="email" />
            <div class="error-message" id="email-error" role="alert">Please enter a valid email address</div>
          </div>

          <div class="form-group">
            <label for="pet-name"><i class="fas fa-paw" aria-hidden="true"></i> Pet's Name:</label>
            <input type="text" id="pet-name" name="pet-name" required placeholder="What's your pet's name?" />
            <div class="error-message" id="pet-name-error" role="alert">Please enter your pet's name</div>
          </div>

          <div class="form-group">
            <label for="pet-breed"><i class="fas fa-dna" aria-hidden="true"></i> Pet Breed (Optional):</label>
            <input type="text" id="pet-breed" name="pet-breed" placeholder="e.g., Golden Retriever, Persian Cat" />
          </div>

          <div class="form-group">
            <label for="date"><i class="fas fa-calendar" aria-hidden="true"></i> Preferred Date:</label>
            <input type="date" id="date" name="date" required />
            <div class="error-message" id="date-error" role="alert">Please select a preferred date</div>
          </div>

          <div class="form-group">
            <label for="time"><i class="fas fa-clock" aria-hidden="true"></i> Preferred Time:</label>
            <input type="time" id="time" name="time" required />
            <div class="error-message" id="time-error" role="alert">Please select a preferred time</div>
          </div>

          <div class="form-group">
            <label for="notes"><i class="fas fa-sticky-note" aria-hidden="true"></i> Additional Notes (Optional):</label>
            <textarea id="notes" name="notes" placeholder="Any special requirements or notes about your pet"></textarea>
          </div>

          <button type="submit" class="submit-button" id="submitButton">
            <i class="fas fa-paper-plane" aria-hidden="true"></i> Book Appointment
          </button>
        </form>
      </div>

      <!-- Confirmation Message -->
      <div class="confirmation" id="confirmation" aria-live="polite">
        <i class="fas fa-check-circle" aria-hidden="true"></i>
        <h3>Booking Request Sent!</h3>
        <p>We'll contact you shortly to confirm your appointment details and selected services.</p>
      </div>

      <!-- Back to Home -->
      <div class="back-home">
        <a href="index.html"><i class="fas fa-arrow-left" aria-hidden="true"></i> Back to Home</a>
      </div>
    </div>
  </div>

  <script>
    // State
    let selectedServices = [];
    let totalPrice = 0;
    let totalSavings = 0;

    // Helpers
    const $ = (sel, root = document) => root.querySelector(sel);
    const $$ = (sel, root = document) => Array.from(root.querySelectorAll(sel));

    const formatINR = (n) => Number(n).toLocaleString('en-IN');

    const debounce = (fn, wait = 150) => {
      let t;
      return (...args) => { clearTimeout(t); t = setTimeout(() => fn(...args), wait); };
    };

    document.addEventListener('DOMContentLoaded', () => {
      initBookingForm();
    });

    function initBookingForm() {
      // Min date today
      const dateEl = $('#date');
      const today = new Date();
      const pad = (x) => String(x).padStart(2, '0');
      const minDate = `${today.getFullYear()}-${pad(today.getMonth()+1)}-${pad(today.getDate())}`;
      dateEl.setAttribute('min', minDate);

      initSelections();
      initSummary();
      initFormValidation();
      initFormSubmission();
      initKeyboardSupport();
    }

    function initSelections() {
      const servicesRoot = $('.services-section');

      // Event delegation for service and combo items
      servicesRoot.addEventListener('click', (e) => {
        const item = e.target.closest('.service-item, .combo-item');
        if (!item) return;
        toggleItem(item);
      });

      // Make entire row focusable with Enter/Space
      servicesRoot.addEventListener('keydown', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          const item = e.target.closest('.service-item, .combo-item');
          if (item) {
            e.preventDefault();
            toggleItem(item);
          }
        }
      });
    }

    function toggleItem(el) {
      const isCombo = el.classList.contains('combo-item');
      const name = (isCombo ? el.querySelector('.combo-name') : el.querySelector('.service-name')).textContent.trim();
      const id = el.getAttribute('data-service');
      const price = parseInt(el.getAttribute('data-price'), 10) || 0;
      const savings = isCombo ? (parseInt(el.getAttribute('data-savings'), 10) || 0) : 0;

      const already = selectedServices.find(s => s.id === id);

      if (already) {
        // Remove
        el.classList.remove('selected');
        el.setAttribute('aria-pressed', 'false');
        selectedServices = selectedServices.filter(s => s.id !== id);
        totalPrice -= already.price;
        if (already.combo) totalSavings -= already.savings;
      } else {
        // Add
        el.classList.add('selected');
        el.setAttribute('aria-pressed', 'true');
        selectedServices.push({ id, name, price, combo: isCombo, savings });
        totalPrice += price;
        if (isCombo) totalSavings += savings;
      }

      updateSelectedSummary();
      updateMiniSummary();
    }

    function initSummary() {
      updateSelectedSummary();
      const onScroll = debounce(() => {
        const hasSelections = selectedServices.length > 0;
        const mini = $('#miniSummary');
        if (!mini) return;
        if (hasSelections) {
          mini.style.display = 'block';
        } else {
          mini.style.display = 'none';
        }
      }, 100);
      window.addEventListener('scroll', onScroll, { passive: true });
    }

    function updateMiniSummary() {
      const mini = $('#miniSummary');
      if (!mini) return;
      const countEl = $('#miniCount');
      const totalEl = $('#miniTotal');
      if (selectedServices.length === 0) {
        mini.style.display = 'none';
        return;
      }
      mini.style.display = 'block';
      countEl.textContent = selectedServices.length;
      totalEl.textContent = formatINR(totalPrice);
    }

    function updateSelectedSummary() {
      const summaryContainer = $('#selectedSummary');
      const summaryItems = $('#summaryItems');
      const totalSavingsElement = $('#totalSavings');
      const savingsAmountElement = $('#savingsAmount');

      if (selectedServices.length === 0) {
        summaryContainer.style.display = 'none';
        return;
      }
      summaryContainer.style.display = 'block';

      const rows = selectedServices.map(service => {
        const label = service.combo ? `${service.name} (COMBO - Save ₹${formatINR(service.savings)})` : service.name;
        return `
          <div class="summary-item">
            <span>${label}</span>
            <span>₹${formatINR(service.price)}</span>
          </div>
        `;
      }).join('');

      const totalRow = `
        <div class="summary-item">
          <span>Total Amount</span>
          <span>₹${formatINR(totalPrice)}</span>
        </div>
      `;

      summaryItems.innerHTML = rows + totalRow;

      if (totalSavings > 0) {
        totalSavingsElement.style.display = 'block';
        savingsAmountElement.textContent = formatINR(totalSavings);
      } else {
        totalSavingsElement.style.display = 'none';
      }
    }

    function initFormValidation() {
      const inputs = $$('input[required], select[required], textarea[required]');
      inputs.forEach(input => {
        input.addEventListener('blur', () => validateField(input));
        input.addEventListener('input', () => {
          if (input.classList.contains('error')) validateField(input);
        });
      });
    }

    function validateField(field) {
      const id = field.id;
      let isValid = true;
      const val = (field.value || '').trim();
      const show = (msg) => showError(id, msg);
      const hide = () => hideError(id);

      if (!val) {
        show(`Please enter ${field.previousElementSibling?.textContent?.replace(':', '')?.toLowerCase() || 'this field'}`);
        isValid = false;
      } else if (field.type === 'email') {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(val)) { show('Please enter a valid email address'); isValid = false; } else hide();
      } else if (field.type === 'tel') {
        // Permissive global phone, keeps your original intent but trims spaces
        const cleaned = val.replace(/\s+/g, '');
        const phoneRegex = /^[\+]?[0-9]{7,15}$/;
        if (!phoneRegex.test(cleaned)) { show('Please enter a valid phone number'); isValid = false; } else hide();
      } else {
        hide();
      }
      return isValid;
    }

    function showError(fieldId, message) {
      const field = document.getElementById(fieldId);
      const errorElement = document.getElementById(fieldId + '-error');
      field.classList.add('error');
      if (errorElement) {
        errorElement.textContent = message;
        errorElement.style.display = 'block';
      }
    }

    function hideError(fieldId) {
      const field = document.getElementById(fieldId);
      const errorElement = document.getElementById(fieldId + '-error');
      field.classList.remove('error');
      if (errorElement) errorElement.style.display = 'none';
    }

    function validateForm() {
      let isValid = true;
      const requiredFields = $$('input[required], select[required]');
      requiredFields.forEach(field => {
        if (!validateField(field)) isValid = false;
      });
      return isValid;
    }

    function getFormData() {
      return {
        name: $('#name').value.trim(),
        phone: $('#phone').value.trim(),
        email: $('#email').value.trim(),
        petName: $('#pet-name').value.trim(),
        petBreed: $('#pet-breed').value.trim(),
        date: $('#date').value,
        time: $('#time').value,
        notes: $('#notes').value.trim(),
        selectedServices: selectedServices.slice(),
        totalPrice,
        totalSavings
      };
    }

    function initFormSubmission() {
      const form = $('#booking-form');
      const submitBtn = $('#submitButton');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        if (selectedServices.length === 0) {
          alert('Please select at least one grooming service before booking.');
          $('.services-section').scrollIntoView({ behavior: 'smooth', block: 'start' });
          return;
        }

        if (!validateForm()) return;

        submitBtn.disabled = true;

        const data = getFormData();
        showConfirmation();

        try {
          await sendBookingRequest(data);
        } catch (err) {
          // In case window.open fails (popup blocked), re-enable submit
          console.error(err);
        } finally {
          submitBtn.disabled = false;
        }
      });
    }

    function showConfirmation() {
      const form = $('.form-section');
      const services = $('.services-section');
      const confirmation = $('#confirmation');

      form.style.display = 'none';
      services.style.display = 'none';
      confirmation.style.display = 'block';

      confirmation.scrollIntoView({ behavior: 'smooth', block: 'start' });
    }

    function safeFormatDate(dateStr) {
      if (!dateStr) return '';
      const d = new Date(dateStr + 'T00:00:00');
      if (isNaN(d.getTime())) return dateStr;
      return d.toLocaleDateString('en-US', { weekday: 'long', year: 'numeric', month: 'long', day: 'numeric' });
    }

    function safeFormatTime(timeStr) {
      if (!timeStr) return '';
      const d = new Date(`2000-01-01T${timeStr}`);
      if (isNaN(d.getTime())) return timeStr;
      return d.toLocaleTimeString('en-US', { hour: 'numeric', minute: '2-digit', hour12: true });
    }

    function encodeWhatsAppText(text) {
      // Safer URL encoding for multi-line formatted text
      return encodeURIComponent(text)
        .replace(/%20/g, '%20')
        .replace(/%0A/g, '%0A')
        .replace(/%2A/g, '%2A');
    }

    async function sendBookingRequest(formData) {
      const formattedDate = safeFormatDate(formData.date);
      const timeFormatted = safeFormatTime(formData.time);

      let servicesText = '';
      formData.selectedServices.forEach(service => {
        servicesText += `• ${service.name}${service.combo ? ' (COMBO - Saved ₹' + service.savings + ')' : ''} - ₹${service.price}\n`;
      });

      let savingsText = '';
      if (formData.totalSavings > 0) {
        savingsText = `\n🎉 *Total Savings: ₹${formData.totalSavings}* 🎉\n`;
      }

      const message =
`🐾 *New Booking Request from Cuddles n Bubbles*

*Customer Information*
Name: ${formData.name}
Phone: ${formData.phone}
Email: ${formData.email}

*Pet Information*
Pet Name: ${formData.petName}
Breed: ${formData.petBreed || 'Not specified'}

*Selected Services*
${servicesText}
*Total Amount: ₹${formData.totalPrice}*${savingsText}
*Appointment Request*
Date: ${formattedDate}
Time: ${timeFormatted}

*Additional Notes:*
${formData.notes || 'None'}

Please confirm this appointment. Thank you! 🐕🐈`;

      const whatsappNumber = '917600243900'; // unchanged
      const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${encodeWhatsAppText(message)}`;

      // Slight delay to ensure confirmation is visible before opening WA
      setTimeout(() => {
        window.open(whatsappUrl, '_blank');
      }, 800);
    }

    function initKeyboardSupport() {
      // Ensure focus ring is visible on keyboard users
      function handleFirstTab(e) {
        if (e.key === 'Tab') {
          document.body.classList.add('user-is-tabbing');
          window.removeEventListener('keydown', handleFirstTab);
        }
      }
      window.addEventListener('keydown', handleFirstTab);
    }
  </script>
</body>
</html>
